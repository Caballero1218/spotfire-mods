!function(){"use strict";var e=!0,t=window.parent?window.parent:window;t.addEventListener("hashchange",(function(){t.location.hash&&(h(),e&&f(!1))})),document.getElementById("collapse").addEventListener("click",(function(){e=!1,f()}));var n,r,i=document.getElementById("search"),a=document.getElementById("filterToSearchResult"),c=document.getElementById("resizeHandle"),o=document.getElementById("searchArea"),l=document.getElementById("flyout"),d=document.getElementById("clearSearch"),u=function(e){let t,n=/$^/,r="",i=[],a=!1,c=0;const o=window.parent?window.parent:window,l=e.linkTooltips;document.getElementById("canvas").addEventListener("click",(function(){document.getElementById("linkDescriptionWrapper").style.display="none"}));var d=d3.select("#canvas").append("svg").attr("id","svg").attr("width","100%").attr("height","100%").append("g").attr("id","mainGroup");return t=d3.hierarchy(e.root),t.x0=0,t.y0=0,t.descendants().forEach(((e,t)=>{e.id=t})),{search:function(e){const r=e.indexOf("*")>=0;n=(e=e.trim().replace(new RegExp(" +","g"),"|").replace(new RegExp("\\*","gi"),"\\w*"))?new RegExp(r?`^(${e})$`:`(${e})`,"i"):/$^/;i=[],function e(t,n){h(t)&&i.push(...n),[].concat(t.children).concat(t._children).filter(u).forEach((function(t){e(t,n.concat(t.id))}))}(t,[]),f()},select:function(e){r=e,f()},expand:function(e){let n=!1;if(function t(r,i){r.children&&m(r,!1);[].concat(r.children).concat(r._children).filter(u).forEach((function(e){t(e,i.concat(r))})),(h(r)||!e)&&(n=!0,i.forEach((function(e){m(e,!0)})))}(t,[]),n)return E(1e3);return Promise.resolve()},update:E};function u(e){return e}function s(e){return document.getElementById("measureText").textContent=e,document.getElementById("measureText").clientWidth+16}function m(e,t){e.children&&1!=t?(e._children=e.children,e.children=null):e._children&&0!=t&&(e.children=e._children,e._children=null)}function f(){d3.select("#canvas").selectAll("g.node").attr("class",g),d3.select("#canvas").selectAll("g.link").attr("class",p)}function h(e){return n.test(e.data.name)}function p(e){let t=["link"];return-1!=i.indexOf(e.target.id)&&t.push("highlight"),t.join(" ")}function g(e){let t=["node"];return h(e)&&t.push("highlight"),e.children||e._children||t.push("leaf"),e.data.name==r&&t.push("selected"),t.join(" ")}function y(e){return e.data&&e.data.name?s(e.data.name):e.source&&e.source.data&&e.source.data.name?s(e.source.data.name):0}function v(e){return`M${e.source.y},${e.source.x}C${(e.source.y+e.target.y)/2},${e.source.x} ${(e.source.y+e.target.y)/2},${e.target.x} ${e.target.y},${e.target.x}`}function E(e=0){let n,i;if(a)return clearTimeout(c),void(c=setTimeout((()=>E(e)),100));a=!0,d3.tree().nodeSize([27,200])(t);var u=t.descendants().reverse(),h=t.links();let x=[];!function e(t,n){let r=Math.max(140,s(t.data.name)+32);x.length<=n&&x.push(r),x[n]=Math.max(x[n],r),t.children&&t.children.forEach((function(t){e(t,n+1)}))}(t,0),u.forEach((function(e){e.y=x.slice(0,e.depth).reduce((function(e,t){return e+t}),0)})),u.forEach((function(e){e._pvp=e._vp})),function e(n){function r(e,n){e._vp=n||t,e._children&&e._children.forEach((e=>r(e,n))),e.children&&e.children.forEach((e=>r(e,n)))}n._children?n._children.forEach((e=>r(e,n))):n.children&&n.children.forEach((t=>{t._vp=n,e(t)}))}(t);let w=function(){var n=d.selectAll("g.link").data(h,(function(e){return e.target.id}));let r=n.enter().append("g").attr("class",p);r.append("path").attr("class","core"),r.append("path").attr("class","padding").on("mouseenter",I).on("mouseleave",B),r.selectAll("path").attr("d",(function(e){let n=e.target._pvp||t;return v({source:{x:n.x0,y:n.y0+y(n)},target:{x:n.x0,y:n.y0+y(n)}})}));let i=n.merge(r).selectAll("path").transition().duration(e).attr("d",(function(e){return v({source:{x:e.source.x,y:e.source.y+y(e)},target:{x:e.target.x,y:e.target.y}})})).end(),a=n.exit().selectAll("path").transition().duration(e).attr("d",(function(e){let t=e.target._vp;return v({source:{x:t.x,y:t.y+y(t)},target:{x:t.x,y:t.y+y(t)}})})).end(),c=n.exit().transition().duration(e).remove().end();return Promise.all([i,a,c])}(),k=function(){var n=d.selectAll("g.node").data(u,(function(e){return e.id})),i=n.enter().append("g").attr("transform",(e=>{let n=e._pvp||t;return`translate(${n.y0+y(n)},${n.x0}) scale(0,0)`})).on("dblclick",(function(e,t){a||(m(t),E(1e3))})).on("click",(function(e,t){document.querySelector("#code").textContent=t.code,o.location.hash=t.data.name,r=t.data.name,f()}));i.append("rect").attr("rx",10).attr("y",-10).attr("height",21).attr("data-id",(function(e){return e.id})).attr("width",y),i.append("text").attr("x",8).attr("y",5).text((function(e){return e.data.name}));let c=n.merge(i).transition().duration(e).attr("transform",(function(e){return`translate(${e.y},${e.x}) scale(1,1)`})).attr("class",g).end().then(),l=n.exit().transition().duration(e).attr("transform",(function(e){return`translate(${e._vp.y+y(e._vp)},${e._vp.x}) scale(0,0)`})).remove().end();return Promise.all([c,l])}();return u.forEach((function(e){e.x0=e.x,e.y0=e.y})),Promise.all([k,w]).then((()=>(a=!1,"Treeview idle")));function B(){clearTimeout(n),n=null}function I(e,t){var r=`${t.source.data.name}->${t.target.data.name}`;"none"!=document.getElementById("linkDescriptionWrapper").style.display&&i!=r&&clearTimeout(n),document.getElementById("linkDescriptionWrapper").style.display="none",i=r;var a=e.pageX+4,c=e.pageY+4,o=(l[r]||[]).map((function(e){return`<div>${e}</div>`})).join("\r\n");n=setTimeout((function(){!function(e,t,r){n=null;var i=document.getElementById("linkDescriptionWrapper");i.style.left=e+"px",i.style.top=t+"px",i.style.display="block",document.getElementById("linkDescriptionContent").innerHTML=r}(a,c,o)}),150)}}}(window.treeData);function s(){function e(){u.expand(a.checked)}d.style.display=i.value?"block":"none",u.search(i.value),this==a?e():a.checked?(clearTimeout(r),r=setTimeout(e,1e3)):clearTimeout(r)}function m(){n.updateBBox().resize().fit().center().zoom(.9)}function f(e){p(l,"collapsed",e),-1!=l.className.indexOf("collapsed")?(l.style.right="-"+l.style.width,setTimeout((function(){document.getElementById("textContent").style.display="none"}),1e3)):(l.clientWidth>document.body.clientWidth-200&&(l.style.width=document.body.clientWidth-200+"px"),document.getElementById("textContent").style.display="block",l.style.right="0")}function h(){var e=t.location.hash.substring(1);if(e){u.select(e);var n=document.querySelector("#"+e);n&&(-1==l.className.indexOf("collapsed")&&n.scrollIntoView(),l.querySelectorAll("div.type").forEach((function(e){p(e,"current",!1)})),p(n.parentElement.parentElement,"current",!0))}}function p(e,t,n){var r=e.className.split(" ").filter((function(e){return e})),i=r.indexOf(t);-1==i||null!=n&&0!=n||r.splice(i,1),-1!=i||null!=n&&1!=n||r.push(t),e.className=r.join(" ")}u.update().then((function(){n=window.svgPanZoom("#svg",{zoomScaleSensitivity:.5,dblClickZoomEnabled:!1,preventMouseEventsDefault:!1}),m()})),c.addEventListener("mousedown",(function(e){function t(e){return Math.min(document.body.clientWidth-300,Math.max(200,e.clientX))}function n(e){c.style.marginLeft=t(e)-r-10+"px"}var r=e.clientX;p(c,"dragging",!0),window.addEventListener("mousemove",n,!1),window.addEventListener("mouseup",(function e(r){c.style.marginLeft="",l.style.width=document.body.clientWidth-t(r)+"px",p(c,"dragging",!1),window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",e)}),!1)})),i.addEventListener("input",s),a.addEventListener("click",s),d.addEventListener("click",(function(){i.value="",s()})),l.addEventListener("transitionend",h),document.getElementById("zoomIn").addEventListener("click",(function(){return n.zoomIn()})),document.getElementById("zoomOut").addEventListener("click",(function(){return n.zoomOut()})),document.getElementById("zoomReset").addEventListener("click",m),document.getElementById("searchButton").addEventListener("click",(function(){p(o,"visible"),i.focus()})),document.getElementById("svg").addEventListener("click",(function(){return p(o,"visible",!1)})),window.addEventListener("keydown",(function(e){e.ctrlKey&&"f"==e.key?(p(o,"visible",!0),i.focus(),e.preventDefault()):"Escape"==e.key&&(p(o,"visible",!1),i.blur(),e.preventDefault())})),i.value=(function(e){for(var n=t.location.search.substring(1).split("&"),r=0;r<n.length;r++){var i=n[r].split("=");if(i[0]==e)return i[1]}return}("search")||"").replace(new RegExp("\\|","g")," "),i.value&&setTimeout((function(){u.search(i.value),u.expand(!0)}),100),t.location.hash&&(f(!1),setTimeout(h,0)),setTimeout((function(){p(l,"animate",!0)}),0),document.body.addEventListener("click",(function(e){var n=e.target;"SPAN"==n.tagName&&"H2"==n.parentElement.tagName&&(t.location.hash=n.textContent),"A"==n.tagName&&(n.getAttribute("target")||(t.location.hash=n.getAttribute("href"),e.preventDefault()))}))}();